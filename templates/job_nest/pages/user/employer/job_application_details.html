{% extends 'components/base.html' %}

{% load static %}


{% block title %}
    Job Application Detail
{% endblock %}
    

{% block content %}

<style>
    body {
        font-family: 'Inter', sans-serif;
        background-color: #f8fafc; /* A clean, light background color */
        color: #1a202c; /* Default text color */
    }
    .glass-container {
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.5); /* More transparent for a better glass effect */
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 10px 40px 0 rgba(0, 0, 0, 0.1);
    }
    .icon-container {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 2.5rem;
        height: 2.5rem;
        border-radius: 50%;
        background-color: #4f46e5;
        color: white;
        box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
    }
    /* Custom message box styling */
    .message-box {
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        transform: translateY(20px);
    }
</style>

<main class="w-full max-w-5xl glass-container p-6 sm:p-10 rounded-3xl shadow-2xl space-y-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Applicant Details Section -->
            <div class="lg:col-span-2 bg-white rounded-2xl p-6 shadow-md transition-transform transform hover:scale-[1.01] duration-300">
                <div class="flex items-center mb-6">
                    <div class="icon-container mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-2"><circle cx="9" cy="7" r="4"/><path d="M10.3 15.3a4 4 0 1 0 0-4.6"/><path d="M18.8 16.8a5 5 0 0 0 2-3.8c0-2.7-2.7-5.4-8.5-5.4h-1c-.6 0-1.1.2-1.6.5"/><path d="M2 17.5c-.2-.8-.2-2 .8-3.2 1.1-1.3 2.9-2.2 5.1-2.3 2.5-.1 4.5.8 5.7 2.1"/></svg>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800">Applicant Details</h2>
                </div>
                <div class="space-y-4 text-gray-700">
                    <div class="flex items-center">
                        <p class="font-semibold text-gray-900 mr-2">Name:</p>
                        <p>{{application.job_seeker.full_name}}</p>
                    </div>
                    <div class="flex items-center">
                        <p class="font-semibold text-gray-900 mr-2">Email:</p>
                        <a href="mailto:johndoe@example.com" class="text-indigo-600 hover:underline">{{application.job_seeker.email}}</a>
                    </div>
                    <div class="flex items-center">
                        <p class="font-semibold text-gray-900 mr-2">Phone:</p>
                        <a href="tel:+1234567890" class="text-indigo-600 hover:underline">{{application.job_seeker.phone_number}}</a>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900 mb-1">About Me:</p>
                        <p class="text-sm">{{application.job_seeker.about}}</p>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900 mb-2">Key Skills:</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-3 py-1 rounded-full">{{application.job_seeker.skills}}</span>
                        </div>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900 mb-1">Links:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li><a href="https://linkedin.com/in/johndoe" target="_blank" class="text-indigo-600 hover:underline">LinkedIn Profile</a></li>
                            <li><a href="https://portfolio.com/johndoe" target="_blank" class="text-indigo-600 hover:underline">Portfolio</a></li>
                            <li><a href="https://github.com/johndoe" target="_blank" class="text-indigo-600 hover:underline">GitHub</a></li>
                        </ul>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900 mb-1">Resume:</p>
                        <a href="#" class="inline-flex items-center text-indigo-600 hover:underline font-medium">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text-2 mr-1"><path d="M4 10V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1"/><path d="M18 10h-8a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2z"/><path d="M10 12h6"/><path d="M10 16h6"/></svg>
                            Download Resume
                        </a>
                    </div>
                </div>
            </div>

            <!-- Job Information Section -->
            <div class="lg:col-span-1 bg-white rounded-2xl p-6 shadow-md transition-transform transform hover:scale-[1.01] duration-300">
                <div class="flex items-center mb-6">
                    <!-- Company Logo and Title -->
                    <img src="https://placehold.co/40x40/4f46e5/ffffff?text=TI" alt="Company Logo" class="h-10 w-10 rounded-full mr-4">
                    <h2 class="text-2xl font-bold text-gray-800">Job Information</h2>
                </div>
                <div class="space-y-4 text-gray-700">
                    <div>
                        <p class="font-semibold text-gray-900">Job Title:</p>
                        <p>{{application.job.job_title}}</p>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900">Company:</p>
                        <p>{{application.job.employer.company_name}}</p>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900">Location:</p>
                        <p>{{application.job.employer.company_location}}</p>
                    </div>
                    <div>
                        <p class="font-semibold text-gray-900">Posted On:</p>
                        <p>{{application.job.created|date:"F j, Y"}}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons Section -->
        <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4 mt-8">
            <button onclick="handleDecline()" class="w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-white bg-red-600 hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105 shadow-lg">
                <div class="flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-circle mr-2"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
                    Decline Applicant
                </div>
            </button>
            <button onclick="handleInterview()" class="w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-white bg-emerald-500 hover:bg-emerald-600 transition duration-300 ease-in-out transform hover:scale-105 shadow-lg">
                <div class="flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-circle-2 mr-2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>
                    Schedule Interview
                </div>
            </button>
        </div>

        <!-- Custom Message Box for success/error messages -->
        <div id="messageBox" class="message-box hidden fixed bottom-4 left-1/2 -translate-x-1/2 p-4 rounded-lg shadow-xl text-center z-[100] transition-all duration-300 transform-gpu">
            <span id="messageText"></span>
            <button id="closeMessageBox" class="ml-4 text-white font-bold leading-none">&times;</button>
        </div>
    </main>

<!-- Custom Message Box for success/error messages -->
<div id="messageBox" class="message-box hidden fixed bottom-4 left-1/2 -translate-x-1/2 p-4 rounded-lg shadow-xl text-center z-[100] transition-all duration-300 transform-gpu">
    <span id="messageText" class="text-sm sm:text-base font-bold"></span>
    <button id="closeMessageBox" class="ml-4 text-white font-bold leading-none">
        &times;
    </button>
</div>

<script>
    // Initialize Lucide Icons
    lucide.createIcons();

    // Custom message box logic (re-used from other pages)
    const messageBox = document.getElementById('messageBox');
    const messageText = document.getElementById('messageText');
    const closeMessageBox = document.getElementById('closeMessageBox');

    function showMessage(message, type) {
        messageText.textContent = message;
        messageBox.classList.remove('hidden', 'bg-green-600', 'bg-red-600', 'bg-blue-600', 'text-white', 'opacity-0', 'translate-y-full');
        messageBox.classList.add('flex', 'opacity-100', 'translate-y-0');

        if (type === 'success') {
            messageBox.classList.add('bg-green-600', 'text-white');
        } else if (type === 'error') {
            messageBox.classList.add('bg-red-600', 'text-white');
        } else {
            messageBox.classList.add('bg-blue-600', 'text-white');
        }

        setTimeout(() => {
            messageBox.classList.add('opacity-0', 'translate-y-full');
            setTimeout(() => messageBox.classList.add('hidden'), 300);
        }, 3000);
    }

    closeMessageBox.addEventListener('click', () => {
        messageBox.classList.add('opacity-0', 'translate-y-full');
        setTimeout(() => messageBox.classList.add('hidden'), 300);
    });

    // Event handlers for the new action buttons
    function handleDecline() {
        showMessage("Applicant declined.", "error");
    }

    function handleInterview() {
        showMessage("Interview scheduled!", "success");
    }
</script>

{% endblock %}